<!DOCTYPE html>
<html>
<head>
  <title>n8n ChatBot</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body { background: #f6f8fa; font-family: 'Segoe UI',sans-serif; margin:0; }
    .container {
      max-width: 520px; margin: 40px auto; background: #fff;
      border-radius: 16px; box-shadow: 0 2px 16px #0001; padding: 0 0 1em 0;
      display: flex; flex-direction: column; min-height: 600px;
    }
    #messages {
      flex: 1; overflow-y: auto; padding: 24px 12px 12px 12px;
      display: flex; flex-direction: column; gap: 18px;
    }
    .bubble {
      max-width: 83%; padding: 12px 18px; border-radius: 18px; font-size: 16px; line-height: 1.5;
      word-break: break-word; white-space: pre-line;
      opacity: 0; transform: translateY(10px); transition: opacity .2s, transform .2s;
    }
    .bubble.user    { align-self: flex-end; background: #5b9fff; color: #fff  }
    .bubble.assistant { align-self: flex-start; background: #e8eafd; color: #222 }
    .bubble.active  { opacity: 1; transform: translateY(0); }
    .bottom-input-bar {
      display: flex; gap: 10px; padding: 8px 13px;
      border-top: 1px solid #eee; background: #fafdff; border-radius: 0 0 16px 16px;
    }
    #question {
      flex: 1; padding: 10px; border-radius: 12px;
      border: 1px solid #cdd1e0; outline: none; font-size: 16px;
      transition: border .2s; background: #f7faff;
    }
    #question:focus { border-color: #5b9fff;}
    #sendBtn {
      background: #5b9fff; color: #fff; border: none;
      border-radius: 12px; padding: 0 22px; font-size: 18px; font-weight: 500;
      cursor: pointer; transition: background .2s;
    }
    #sendBtn:disabled { background: #a1c6fd; cursor: not-allowed; }
  </style>
</head>
<body>
  <div class="container">
    <div id="messages"></div>
    <form class="bottom-input-bar" id="form" autocomplete="off">
      <input id="question" placeholder="Type your question..." autocomplete="off" />
      <button id="sendBtn" type="submit">Send</button>
    </form>
  </div>
  <script>
    const messages = document.getElementById('messages');
    const form     = document.getElementById('form');
    const input    = document.getElementById('question');
    const btn      = document.getElementById('sendBtn');
    // Scroll to bottom
    function scrollDown() { messages.scrollTop = messages.scrollHeight; }
    // Add a message bubble
    function addBubble(text, who='user') {
      const bubble = document.createElement('div');
      bubble.className = 'bubble ' + who;
      bubble.textContent = text;
      messages.appendChild(bubble);
      // For fade-in effect
      setTimeout(() => bubble.classList.add('active'), 30);
      scrollDown();
    }
    // Handle send
    async function onSend(e) {
      e.preventDefault();
      const question = input.value.trim();
      if (!question) return;
      addBubble(question, 'user');
      input.value = '';
      btn.disabled = true;
      addBubble('â€¦', 'assistant'); // Loading type animation
      scrollDown();
      // Replace with your real webhook URL below!
      const url = 'https://scripboxgoutham.app.n8n.cloud/webhook/8298a5d1-452f-4f78-85b0-d33bc00e3d1d';
      try {
        const res = await fetch(url, {
          method: 'POST',
          headers: {'Content-Type':'application/json'},
          body: JSON.stringify({ question })
        });
        let botText = await res.text();
        messages.removeChild(messages.lastChild);
        addBubble(botText, 'assistant');
      } catch (err) {
        messages.removeChild(messages.lastChild);
        addBubble('Sorry, there was a network or bot error!', 'assistant');
      }
      btn.disabled = false;
    }
    form.addEventListener('submit', onSend);
    // Optional: autofocus on page load
    input.focus();
  </script>
</body>
</html>